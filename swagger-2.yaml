swagger: '2.0'

info:
  description: the server API of the Homeworks
  version: 1.0.0
  title: lonely planet API
    
host: 47.102.120.167:2333
basePath: /api
tags:
  - name: user
    description: user
  - name: secret
    description: secret
  - name: comment
    description: comment
  - name: requirement
    description: requirement
  - name: remind
    description: remind
  - name: message
    description: message 

 
    
schemes:
  - https
  - http
  
paths:
  /user/login/:
    post:
      tags:
        - user
      summary: 登录
      description: login for account
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: data
          in: body
          description: post data
          schema:
            required:
              - Sid
              - Password
            properties:
              Sid:
                type: string
                description: 学号
              Password:
                type: string
                description: 密码
      responses:
        200:
          description: 登录成功
          schema:
            type: object
            required:
              - token
            properties:
              token:
                type: string
              msg:
                type: string
                description: 登录结果信息
        400:
          description: 出现错误
          schema:
            type: object
            properties:
              msg:
                type: string

      
  /requirement/history/:
    get:
      tags:
        - requirement
      summary: 历史发布需求
      description: Get requirement history
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
      responses:
        200:
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              history:
                type: array
                items:
                  properties:
                    requirementsId :
                      type: string  #不显示
                    title:
                      type: string
                    content:
                      type: string
                    postTime:
                      type: string
                    date:
                      type: string
                    timeForm:
                      type: integer
                    timeEnd:
                      type: integer
                    type:
                      type: integer
                    requiremPeopleNum:
                      type: integer
                    place:
                      type: integer
                    tag: 
                      type: integer
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
            

  /requirement/id/view/:
    get:
      tags:
        - requirement
      summary: 查看需求
      description: Get requirement 
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: requirement_id
          in: query
          required: true
          type: string
      responses:
        200:
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              title:
                type: string
              content:
                type: string
              postTime:
                type: string
              date:
                type: string
              timeForm:
                  type: integer
              timeEnd:
                  type: integer
              type:
                  type: integer
              requiremPeopleNum:
                  type: integer
              place:
                  type: integer
              tag: 
                  type: integer
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
      
  /secret/history/:
    get:
      tags:
        - secret
      summary: 历史发布秘密 
      description: get history of secrets
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string 
      responses:
        200:
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              history:
                type: array
                items:
                  properties:
                    secretId :
                      type: string  #不显示
                    content:
                      type: string
                    sendTime:
                      type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
                
  /comment/history/:
    get:
      tags:
        - comment
      summary: 查看秘密的评论 
      description: get history of comments
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string 
      responses:
        200:
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              history:
                type: array
                items:
                  properties:
                    commentId :
                      type: string  #不显示
                    content:
                      type: string
                    sendTime:
                      type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string  
  
    
  /remind/day/infomation/:
    get:
      tags:
        - remind
      summary: 获取白天的回复提醒 
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
              data:
                type: array
                items:
                  properties:
                    title:
                      type: string
                    nickname:
                      type: string
                    gender:
                      type: integer
                    college:
                      type: string
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
  
  /remind/day/:
    get:
      tags:
        - remind
      summary: 获取白天的申请提醒
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
              data:
                type: array
                items:
                  properties:
                    title:
                      type: string
                    type:
                      type: string
                    nickname:
                      type: string
                    sendtime:
                      type: string
        400:
          description: 参数不全
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
  
  /message/confirm/:
    post:
      tags:
        - message
      summary: 确认是否接受申请 
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: requirement_id
          type: string
          in: query
          required: true
        - name: status
          type: integer
          in: query
          required: true
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
                
  /requirement/id/applyment/:
    post:
      tags:
        - requirement
      summary: 申请他人的需求  
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: requirement_id
          type: string
          in: query
          required: true
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string

  /message/content/:
    get:
      tags:
        - message
      summary: 收到的申请提醒和回复提醒的详情页  
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
      responses:
        '200':
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              title:
                type: string
              content:
                type: string
              requirementTime:
                type: string
              timeForm:
                type: integer
              timeEnd:
                type: integer
              type:
                type: integer
              requiremPeopleNum:
                type: integer
              place:
                type: integer
              tag: 
                type: integer
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string

  /user/info/:
    get:
      tags:
        - user
      summary: 获取个人信息
      description: user's information
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
      responses:
        200:
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              Sid:
                type: string
              Nickname:
                type: string
              College:
                type: string
              Gender:
                type: string
              Grade:
                type: string
        400:
          description: 错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
                
  /remind/night/unread/:
    get:
      tags:
        - remind
      summary: 黑夜是否存在未读消息提醒    
      parameters:
        - name: token
          in: header
          required: true
          type: string
      responses:
        200:
          description: success
          schema:
            properties:
              msg:
                type: string
              existence:
                type: boolean
        400:
          description: 错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
                      
  /remind/night/:
    get:
      tags:
        - remind
      summary: 获取黑夜消息提醒 
      parameters:
        - name: token
          in: header
          required: true
          type: string
      responses:
        200:
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              commentdata:
                type: array
                items:
                  properties:
                    commentTime:
                      type: string
                    comment:
                      type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
            
  /user/info/change/:
    put:
      tags:
        - user
      summary: 修改个人信息
      description: change users' information
      consumes: 
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - VerifyItem
              - VerifyInfo
            properties:
              VerifyItem:
                type: string
              VerifyInfo:
                type: string
      responses:
        200:
          description: change successfully
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 修改失败
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
                
  /secret/create/:
    post:
      tags:
        - secret
      summary: 发布秘密
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - content
              - sendTime
            properties:
              colour:
                type: string
              content:
                type: string
              sendTime:
                type: string
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
              secretId:
                type: integer
        400:
          description: 发布失败 
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string


  /comment/create/:
    post:
      tags:
        - comment
      summary: 发布评论 
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              - senderSid
              - commentTime
              - content
              - secretId
            properties:
              senderSid:
                type: string
              commentTime:
                type: integer
              comment:
                type: string
              secretId:
                type: integer
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
                
  
  /secret/delete/:
    delete:
      tags:
        - secret
      summary: 删除秘密
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: secretId
          in: query
          required: true
          type: string      
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string

        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string
 
  /comment/id/delete/:
    delete:
      tags:
        - comment
      summary: 删除评论
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: comment_id
          in: query
          required: true
          type: string      
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string

        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string
 
  /requirement/create/:
    post:
      tags:
        - requirement
      summary: 添加需求 
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: data
          in: body
          schema:
            required:
              #- senderSid
              - title
              - content
              - date
              - timeForm
              - timeEnd
              - type
              - requirePeopleNum
              - place
              - tag
            properties:
              #senderSid:
               # type: string
              title:
                type: string
              content:
                type: string
              date:
                type: string
              timeForm:
                type: integer
              timeEnd:
                type: integer
              type:
                type: integer
              requiremPeopleNum:
                type: integer
              place:
                type: integer
              tag: 
                type: integer
                description: 类别 
      responses:
        200:
          description: 发布需求成功 
          schema:
            type: object
            properties:
              msg:
                type: string
        400:
          description: 发布错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string


  /remind/day/unread/:
    get:
      tags:
        - remind
      summary: 白天是否存在未读消息提醒
      parameters:
        - name: token
          in: header
          required: true
          type: string        
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
              exsitence:
                type: boolean
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
       
                
  /requirement/square/:
    get:
      tags:
        - requirement
      summary: 请求筛选
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: type       
          in: query
          required: true
          type: string
          #eg:“学习”,初始页面即为请求筛选”学习“项，即为１，其余项用户没有选取筛选条件的可以不提交
        - name: space
          in: query
          type: string
        - name: dataTime
          in: query
          type: string
        - name: timeForm
          in: query
          type: integer
        - name: tag
          in: query
          type: string
          #eg:""
        
      responses:
        200:
          description: 成功 
          schema:
            type: object
            properties:
              msg:
                type: string
              data:
                type: array
                items:
                  properties:
                    title:
                      type: string
                    content:
                      type: string
                    equirementTime:
                      type: string
                    timeForm:
                      type: integer
                    timeEnd:
                      type: integer
                    type:
                      type: integer
                    requiremPeopleNum:
                      type: integer
                    place:
                      type: integer
                    tag: 
                      type: integer
                
        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string

  /requirement/id/delete/:
    delete:
      tags:
        - requirement
      summary: 删除需求
      parameters:
        - name: token
          in: header
          required: true
          type: string
        - name: requirement_id
          in: query
          required: true
          type: string      
      responses:
        200:
          description: success
          schema:
            type: object
            properties:
              msg:
                type: string
              statusMessage:
                type: string

        400:
          description: 请求错误
          schema:
            type: object
            properties:
              msg:
                type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
        404:
          description: 未找到
          schema:
            type: object
            properties:
              msg:
                type: string

            #别人发布的秘密           
  /secret/square/:
    get:
      tags:
        - secret
      summary: 黑夜广场(请求秘密)　
      description: secrets
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string 
        - name: page
          in: query
          type: integer
      responses:
        200:
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              secrets:
                type: array
                items:
                  properties:
                    secretId:
                      type: string  #不显示
                    colour:
                      type: integer
                    content:
                      type: string
                    sendTime:
                      type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
                
  /secret/content/:
    get:
      tags:
        - secret
      summary: 秘密详情 　
      description: secrets
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - name: token
          in: header
          required: true
          type: string 
        - name: secretId
          in: query
          type: string
      responses:
        200:
          description: successful operation
          schema:
            type: object
            properties:
              msg:
                type: string
              Colour:
                type: integer
              comment:
                type: array
                items:
                  properties:
                    portrait:
                      type: integer
                    content:
                      type: string
                    sendTime:
                      type: string
        401:
          description: 身份认证错误
          schema:
            type: object
            properties:
              msg:
                type: string
